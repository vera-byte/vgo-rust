[server]
host = "0.0.0.0"
ws_port = 5200
http_port = 8080
timeout_ms = 200000
enable_geo = true

[auth]
# 认证超时时间（毫秒）/ Authentication deadline (milliseconds)
deadline_ms = 1500

# 是否启用认证 / Enable authentication
# 设置为 false 时，所有 token 都会通过验证（开发模式）
# When set to false, all tokens will pass validation (development mode)
enabled = false

# 认证中心 URL / Authentication center URL
# 用于验证 token 的远程服务地址
# Remote service URL for token validation
center_url = "http://127.0.0.1:8090"

# 认证请求超时时间（毫秒）/ Authentication request timeout (milliseconds)
timeout_ms = 1000

[logging]
level = "debug"
json_format = false

[amap]
key = "f18fcb3090a46d91b99c81d4aa71b4e3"


[quic]
enabled = 1
host = "0.0.0.0"
port = 5201
tls_cert = "certs/server.crt"
tls_key = "certs/server.key"

[storage]
path = "./data/v-connect-im-node-local"

[cluster]
peers = ""

[plugins]
# 插件安装配置 / Plugin installation configuration
# 支持从 URL 自动下载并安装插件 / Support automatic download and install plugins from URL
# 变量支持: ${os} (操作系统: darwin/linux/windows), ${arch} (架构: amd64/arm64)
# Variable support: ${os} (OS: darwin/linux/windows), ${arch} (arch: amd64/arm64)
# 示例: "https://github.com/WuKongIM/plugins/releases/download/latest/wk.plugin.ai-example-${os}-${arch}.wkp"
# Example: "https://github.com/WuKongIM/plugins/releases/download/latest/wk.plugin.ai-example-${os}-${arch}.wkp"
# install = [
#     "https://github.com/WuKongIM/plugins/releases/download/latest/wk.plugin.ai-example-${os}-${arch}.wkp"
# ]
#install = [
#    "file:///Users/mac/workspace/vgo-rust/dist/plugins/v-connect-im-plugin-storage-sled-0.0.0-darwin-arm64.vp",
#]
# 插件存储目录 / Plugin storage directory
plugin_dir = "./plugins"

# Unix Socket 通信地址（用于本地插件） / Unix Socket communication address (for local plugins)
# 如果配置此路径，将启动 Unix Socket 服务器用于与本地插件通信
# If configured, will start Unix Socket server for local plugin communication
# 支持 ~ 展开为用户主目录 / Supports ~ expansion to user home directory
socket_path = "~/vp/sockets/runtime.sock"

# 插件 Debug 模式 / Plugin debug mode
# 启用后，所有插件将以 debug 模式启动，显示详细日志
# When enabled, all plugins will start in debug mode with verbose logging
debug = true

# 插件日志级别 / Plugin log level
# 可选值 / Options: trace, debug, info, warn, error
# log_level = "debug"

# 开发模式插件（直接从源码运行）/ Development mode plugins (run from source)
# 格式 / Format: "plugin_name:cargo_project_path"
# 示例 / Example: "example:/Users/mac/workspace/v-connect-im-plugin-example"
dev_plugins = [
    "storage-sled:/Users/mac/workspace/vgo-rust/v-plugins-hub/v-connect-im-plugin-storage-sled",
]
